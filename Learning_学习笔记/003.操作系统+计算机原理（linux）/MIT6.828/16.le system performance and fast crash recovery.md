Ext3 journal
主要内容 ext3 相对 xv6 的性能优化
Log = journal
ext3 = ext2 + journal
logs的功能：make multi-step disk updates atomic or nothing with respect to crash
Correctness of log: write ahead log
xv6 log

复习
1. 文件系统：树形结构 & 以及一些非树形的meta (inode/bit map block/directory content)
2. Log (block in the beginning of the disk)
  1. Header block (包含每一个block的log对应实际内存的地址)
  2. data/metadata blocks
3. Block cache
  1. 调用system call时会先往cache里写
  2. cache往log里搬
  3. log里写完以后，会在header block记录对应的地址
  4. --- --- --- commit point => 此处以后，拥有failure recover的能力
  5. 把log中的数据往实际disk里搬

begin_op()
...            => 中间都会往cache里写
end_op()       调用end，说明system call结束，开始搬cache -> log -> disk

要点