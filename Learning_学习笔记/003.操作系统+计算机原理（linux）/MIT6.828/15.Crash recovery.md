讲义：https://pdos.csail.mit.edu/6.S081/2020/lec/l-crash.txt
视频：https://www.youtube.com/watch?v=7Hk2dIorDkk

一、为什么需要故障恢复?
fs系统调用一般会包含多个步骤，如果执行中系统crash了（断电等情况），会导致写入非预期的数据（或系统崩溃），因此需要crash recovery帮助我们在系统重启的时候恢复操作

Example：
$ echo hi > x
# create trace from last lecture:
bwrite: block 33 by ialloc   # allocate inode in inode block 33
bwrite: block 33 by iupdate  # update inode (e.g., set nlink)
bwrite: block 46 by writei   # write directory entry, adding "x" by dirlink()
bwrite: block 32 by iupdate  # update directory inode, because inode may have changed
....

如果在bwrite 33和bwrite 46之间crash了会怎么样？


